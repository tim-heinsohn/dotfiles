# toml bombadil (configuration file)
#
# A Dotfile Manager written in Rust
# <https://oknozor.github.io/toml-bombadil/>
#
# Template variables are rendered using Tera. Use {{ var }} syntax.
# Note: Some zsh files (e.g., p10k.zsh) use ${#...} syntax which conflicts
# with Tera template parsing and must be symlinked via posthooks.
dotfiles_dir = "dotfiles"

[settings]
prehooks = [ "~/dotfiles/bin/prehooks" ]
posthooks = [ "~/dotfiles/bin/posthooks" ]

# ============================================================
# Shell Configuration
# ============================================================
[settings.dots]
bash_profile = { source = "shell/bash_profile", target = ".bash_profile" }
bashrc = { source = "shell/bashrc", target = ".bashrc" }
profile = { source = "shell/profile", target = ".profile" }
zlogin = { source = "shell/zlogin", target = ".zlogin" }
zshrc = { source = "zsh/zshrc", target = ".zshrc" }
zsh_aliases = { source = "zsh/aliases", target = ".zsh/aliases" }
zsh_environment = { source = "zsh/environment", target = ".zsh/environment" }
zsh_functions = { source = "zsh/functions", target = ".zsh/functions" }
zsh_p10k_custom = { source = "zsh/p10k.custom.zsh", target = ".zsh/p10k.custom.zsh" }
zsh_sheldon = { source = "zsh/plugins.toml", target = ".config/sheldon/plugins.toml" }

# ============================================================
# Version Control
# ============================================================
gitattributes = { source = "git/gitattributes", target = ".gitattributes" }
gitconfig = { source = "git/gitconfig", target = ".gitconfig" }
gitignore = { source = "git/gitignore", target = ".gitignore" }
gittigrc = { source = "git/tigrc", target = ".tigrc" }

# ============================================================
# Editors
# ============================================================
vimrc = { source = "vim/vimrc", target = ".vimrc" }
vimrc_minimal = { source = "vim/vimrc.minimal", target = ".vimrc.minimal" }
vimrc_template = { source = "vim/vimrc.template", target = ".vimrc.template" }
nvim_init_lua = { source = "nvim/init.lua", target = ".config/nvim/init.lua" }
nvim_plugins = { source = "nvim/lua/plugins.lua", target = ".config/nvim/lua/plugins.lua" }
nvim_keymaps = { source = "nvim/lua/keymaps.lua", target = ".config/nvim/lua/keymaps.lua" }
nvim_functions = { source = "nvim/lua/functions.lua", target = ".config/nvim/lua/functions.lua" }
nvim_lsp_setup = { source = "nvim/lua/lsp_setup.lua", target = ".config/nvim/lua/lsp_setup.lua" }

# ============================================================
# AI / Coding Assistants
# ============================================================
opencode = { source = "opencode/opencode.json", target = "~/.config/opencode/opencode.json" }
opencode_smart_title = { source = "opencode/smart-title.jsonc", target = "~/.config/opencode/smart-title.jsonc" }

# ============================================================
# Window Managers / Desktop
# ============================================================
i3 = { source = "i3/config", target = ".config/i3/config" }
i3_status = { source = "i3/i3status.conf", target = ".config/i3status/config" }
i3_status_with_hostname = { source = "i3/i3status_with_hostname", target = ".config/i3/i3status_with_hostname" }
rofi = { source = "rofi/config", target = ".config/rofi/config.rasi" }
rofi_pass = { source = "rofi/rofi-pass", target = ".config/rofi-pass/config" }
wezterm = { source = "wezterm/wezterm.lua", target = "~/.wezterm.lua" }

# ============================================================
# Development Tools
# ============================================================
railsrc = { source = "rails/railsrc", target = ".railsrc" }
npmrc = { source = "npm/npmrc", target = ".npmrc" }
pandoc_defaults = { source = "pandoc/defaults.yaml", target = ".pandoc/defaults.yaml" }
tmux = { source = "tmux/tmux.conf", target = ".tmux.conf" }

# ============================================================
# Security
# ============================================================
gpg_agent = { source = "gpg/gpg-agent", target = ".gnupg/gpg-agent.conf" }
gopass_shared = { source = "gopass/config.shared", target = ".config/gopass/config.shared" }

# ============================================================
# X11 / Input
# ============================================================
xinitrc = { source = "xinit/xinitrc", target = ".xinitrc" }
xkbmap = { source = "xmodmap/xkbmap", target = ".Xkbmap" }
xmodmap = { source = "xmodmap/xmodmap", target = ".Xmodmap" }

# ============================================================
# Other Applications
# ============================================================
flameshot =  { source = "utils/flameshot/flameshot.ini", target = "~/.config/flameshot/flameshot.ini" }
gemini_settings = { source = "gemini/settings.json", target = ".gemini/settings.json" }

# NOTE: copy manually: "zsh/p10k.zsh" to ".p10k.zsh"
# NOTE: p10k.claude.zsh includes zsh parameter length syntax `${#...}`
# which conflicts with Tera template comment parsing in Bombadil.
# We symlink it in posthooks to bypass templating.
# zsh_p10k_claude = { source = "zsh/p10k.claude.zsh", target = ".zsh/p10k.claude.zsh" }
# Note: Codex MCP configuration is managed dynamically via bin/codex-mcp.
# The file codex/mcp.toml remains as a reference template only and is not symlinked.
